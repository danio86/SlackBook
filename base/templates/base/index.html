{% extends 'base.html' %}


{% block content %}
    <h1>Home Template</h1>

    <!-- <style>
        .home{
            display: grid;
            grid-template-columns: 1fr 3fr;
            /* fr = fractions */
        }
    </style> -->
    
    <div class="home">
        

        <div>
            <h2>Channels</h2>
            <hr>

            <div>
                <a href="{% url 'home' %}">All Channels</a>
            </div>

            {% for topic in topics %}
                <div>
                    <a href="{% url 'home' %}?r={{topic.title}}">{{topic.title}}</a>
                    <!-- this leads to the home-page with the url-endig of ?r=topic.title (e.x. pizza) -->
                    <!-- r = request couls be any letter -->
                </div>
            {% endfor %}

        </div>

        <div>
            <h4>{{channel_count}} Channels available</h4>
            <a href="{% url 'create-channel' %} ">Create Channel</a>

            <div>          
                {% for topic in channels %}
                <div>

                    {% if request.user == topic.host %}
                        <a href="{% url 'update-channel' topic.id %}">Edit</a>
                        <a href="{% url 'delete-channel' topic.id %}">Delete</a>
                    {% endif %}

                    <span>@{{ topic.host.username }}</span>
                    <!-- host.user is a django function -->
                    <h4>{{topic.id}} -- <a href="{% url 'channel' topic.id %} ">{{topic.title}}</a></h4>
                    <!-- <h4>{{topic.id}} -- <a href="/channel/{{topic.id}}">{{topic.title}}</a></h4> -->
                    <!-- this leads to channel(name!) with the right id -->
                    
                    <small>{{ topic.topic.title }}</small>
                    <hr>
                </div>
                {% endfor %}
            </div>

        </div>

        <div>
            <h3>Recent Avtivities</h3>
            <hr>
            {% for comment in comments %}
                <div>
                    <small>@{{ comment.user }} - {{ comment.created_on|timesince }}</small>
                    <br>
                    <h5>Channel: {{ comment.channel }}</h5>
                    <h4>{{ comment }}</h4>
                    {% if request.user == comment.user%}
                        <a href="{% url 'delete-comment' comment.id %}"><button>Delete Comment</button></a>
                    {% endif %}
                </div>
                <hr>
            {% endfor %}
            

        </div>

        

    </div>

{% endblock %}